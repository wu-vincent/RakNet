---
title: "SWIG Extras Tutorial"
description: Additional SWIG instructions for optional dependent extensions such as Autopatcher MySQL.
---

This file contains additional instructions for using SWIG with the optional dependent extension options.

<Callout type="info">
The base instructions are available in the [SWIG Tutorial](/csharp-swig/swig-tutorial). Complete that tutorial first before following these steps.
</Callout>

## Autopatcher MySQL Version

### Windows

The below instructions detail the extra configuration needed on the Visual Studio project.

**Extra Project Options:**
Under General -> Common Language Runtime Support, the option needs to be set to **No Common Language Runtime Support**.

#### Additional Include Directories

Under Dependent Extensions the following additional directories need to be in the include configuration:

- `Autopatcher/AutopatcherMySQLRepository`
- `Autopatcher`
- `bzip2-1.0.3`
- `MySQLInterface`

MySQL header directory needs to be included. For 5.1 on Vista the directory looks like: `C:\Program Files (x86)\MySQL\MySQL Server 5.1\include`

#### Additional Sources

Under Dependent Extensions the following additional source files need to be included in the project:

- `bzip2-1.0.3/blocksort.c`
- `bzip2-1.0.3/bzip2.c`
- `bzip2-1.0.3/bzlib.c`
- `bzip2-1.0.3/compress.c`
- `bzip2-1.0.3/crctable.c`
- `bzip2-1.0.3/decompress.c`
- `bzip2-1.0.3/dlltest.c`
- `bzip2-1.0.3/huffman.c`
- `bzip2-1.0.3/randtable.c`
- `Autopatcher/ApplyPatch.cpp`
- `Autopatcher/AutopatcherClient.cpp`
- `Autopatcher/AutopatcherMySQLRepository/AutopatcherMySQLRepository.cpp`
- `Autopatcher/AutopatcherServer.cpp`
- `Autopatcher/CreatePatch.cpp`
- `Autopatcher/MemoryCompressor.cpp`
- `MySQLInterface/MySQLInterface.cpp`

#### Additional Libraries

The MySQL library needs to be included.

For 5.1 on Vista the location looks like:

- **Debug:** `C:\Program Files (x86)\MySQL\MySQL Server 5.1\lib\debug\libmysql.lib`
- **Release:** `C:\Program Files (x86)\MySQL\MySQL Server 5.1\lib\opt\libmysql.lib`

#### Replacement SWIG File Generation Tool Steps

<Callout type="info">
These are replacement steps. If the `DLL_Swig` project is used, the `PreBuild.bat` needs to be modified -- see the last steps for instructions on how to do that.
</Callout>

<Steps>

<Step>

### Open a command prompt

Click the start menu and click on run. In Vista click start, search, type "run", and hit enter. Type `cmd` and hit enter.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `C:\RakNet\DependentExtensions\Swig`.

```batch
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the MakeSwigWithExtras batch file

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory (e.g. `C:\RakNet\Source`). `PATH_TO_SWIG` is an unquoted path with a trailing slash to the SWIG directory (e.g. `C:\Swig\`). If you added SWIG to your PATH variable then `PATH_TO_SWIG` is not needed and can be ignored or set to `""`. `PATH_TO_DEPENDENTEXTENSIONS` is the path to the Dependent Extensions directory (e.g. `C:\RakNet\DependentExtensions`). `OPTION1` in this case will be `MYSQL_AUTOPATCHER`.

```batch
MakeSwigWithExtras.bat PATH_TO_RAKNETSOURCE PATH_TO_SWIG PATH_TO_DEPENDENTEXTENSIONS OPTION1
```

</Step>

<Step>

### Update `DLL_Swig` project (if applicable)

If you are not using the `DLL_Swig` project, go to "Creating the SWIG Wrapped DLL Project" in the [SWIG Tutorial](/csharp-swig/swig-tutorial). If you are using the `DLL_Swig` project, open `Prebuild.bat` in the project directory and replace the line `MakeSwig.bat "../../Source"` with the command created in these steps. Then go to "Creating the SWIG Wrapped DLL Project" in the [SWIG Tutorial](/csharp-swig/swig-tutorial). Make sure the extra configuration in this help file is followed.

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you want to use `SQLiteClientLoggerPlugin`, skip the step above and use the next command instead.
- If you have added SWIG to your PATH variable, just use `""` for `PATH_TO_SWIG`.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `C:\RakNet\DependentExtensions\SQLite3Plugin`.

```batch
MakeSwig.bat PATH_TO_RAKNETSOURCE PATH_TO_SWIG PATH_TO_SQLITEPLUGIN
```

#### Replacement SWIG File Generation Manual Steps

<Steps>

<Step>

### Open a command prompt

Click the start menu and click on run. In Vista click start, search, type "run", and hit enter. Type `cmd` and hit enter.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `C:\RakNet\DependentExtensions\Swig`.

```batch
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the SWIG command

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory (e.g. `C:\RakNet\Source`). `PATH_TO_DEPENDENTEXTENSIONS` is the path to the Dependent Extensions directory (e.g. `C:\RakNet\DependentExtensions`).

```batch
C:\Swig\swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -I"PATH_TO_DEPENDENTEXTENSIONS" -DSWIG_ADDITIONAL_AUTOPATCHER_MYSQL -outdir SwigOutput\SwigCSharpOutput -o SwigOutput\CplusDLLIncludes\RakNet_wrap.cxx SwigInterfaceFiles\RakNet.i
```

</Step>

<Step>

### Continue with DLL creation

Go to "Creating the SWIG DLL" in the [SWIG Tutorial](/csharp-swig/swig-tutorial). Make sure the extra configuration in this help file is followed.

</Step>

</Steps>

### Linux

#### Replacement SWIG File Tool Steps

<Callout type="info">
The Linux batch requires Wget, Tar, Make and GCC to be installed, unless SWIG is already installed. Most of the time these are already installed.
</Callout>

<Steps>

<Step>

### Open a terminal

Open a terminal if you are not already at one.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `/home/usr/RakNet/DependentExtensions/Swig`.

```bash
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Set permissions

```bash
chmod u+x MakeSwig.sh
```

</Step>

<Step>

### Run the MakeSwigWithExtras script

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory (e.g. `/home/usr/RakNet/Source`). `PATH_TO_DEPENDENTEXTENSIONS` is the path to the Dependent Extensions directory (e.g. `/home/usr/RakNet/DependentExtensions`). `OPTION1` in this case will be `MYSQL_AUTOPATCHER`.

```bash
MakeSwigWithExtras.sh PATH_TO_RAKNETSOURCE PATH_TO_DEPENDENTEXTENSIONS OPTION1
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you want to use `SQLiteClientLoggerPlugin`, skip the step above and use the next command instead.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
MakeSwig.sh PATH_TO_RAKNETSOURCE PATH_TO_SQLITEPLUGIN
```

Then skip to "Creating the C# project" in the [SWIG Tutorial](/csharp-swig/swig-tutorial).

#### Replacement Manual SWIG File Generation Steps

<Steps>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `/home/usr/RakNet/DependentExtensions/Swig`.

```bash
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the SWIG command

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example `/home/usr/RakNet/Source`.

```bash
swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -outdir SwigOutput/SwigCSharpOutput -o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx SwigInterfaceFiles/RakNet.i
```

</Step>

<Step>

### Continue to next section

Go to the next section below.

</Step>

</Steps>

#### Replacement Creating the SWIG Dynamic Link Steps

<Callout type="info">
If you ran the Linux batch tool it will have made the dynamic link and attempted to install it, so you may skip these steps if it ran successfully.
</Callout>

<Steps>

<Step>

### Compile C files separately

`PATH_TO_DEPENDENTEXTENSIONS` is the path to the Dependent Extensions directory (e.g. `/home/usr/RakNet/DependentExtensions`). First we need to compile the C files separately with GCC in C mode:

```bash
gcc -c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/blocksort.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/bzip2.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/bzlib.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/compress.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/crctable.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/decompress.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/dlltest.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/huffman.c PATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3/randtable.c
```

</Step>

<Step>

### Compile C++ files and link

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory (e.g. `../DependentExtensions/Swig`). Now use those object files and compile the C++ files:

```bash
g++ *.cpp PATH_TO_RAKNET_SWIG_FILES/SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx blocksort.o bzip2.o bzlib.o compress.o crctable.o decompress.o dlltest.o huffman.o randtable.o PATH_TO_DEPENDENTEXTENSIONS/Autopatcher/ApplyPatch.cpp PATH_TO_DEPENDENTEXTENSIONS/Autopatcher/AutopatcherClient.cpp PATH_TO_DEPENDENTEXTENSIONS/Autopatcher/AutopatcherMySQLRepository/AutopatcherMySQLRepository.cpp PATH_TO_DEPENDENTEXTENSIONS/Autopatcher/AutopatcherServer.cpp PATH_TO_DEPENDENTEXTENSIONS/Autopatcher/CreatePatch.cpp PATH_TO_DEPENDENTEXTENSIONS/Autopatcher/MemoryCompressor.cpp PATH_TO_DEPENDENTEXTENSIONS/MySQLInterface/MySQLInterface.cpp -l pthread -lmysqlclient -I/usr/include/mysql/ -I./ -IPATH_TO_DEPENDENTEXTENSIONS/Autopatcher/AutopatcherMySQLRepository -IPATH_TO_DEPENDENTEXTENSIONS/Autopatcher -IPATH_TO_DEPENDENTEXTENSIONS/bzip2-1.0.3 -IPATH_TO_DEPENDENTEXTENSIONS/MySQLInterface -shared -o RakNet
```

Note: `-l pthread` is lowercase L while `-I./` is uppercase i.

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you wish to use `SQLiteClientLoggerPlugin`, use the following command instead of the compile step above:
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
g++ *.cpp PATH_TO_RAKNET_SWIG_FILES/SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx PATH_TO_SQLITEPLUGIN/SQLite3ClientPlugin.cpp PATH_TO_SQLITEPLUGIN/SQLite3PluginCommon.cpp PATH_TO_SQLITEPLUGIN/Logger/ClientOnly/SQLiteClientLoggerPlugin.cpp PATH_TO_SQLITEPLUGIN/Logger/SQLiteLoggerCommon.cpp -l pthread -I./ -IPATH_TO_SQLITEPLUGIN/Logger/ClientOnly -IPATH_TO_SQLITEPLUGIN/Logger -IPATH_TO_SQLITEPLUGIN -shared -o RakNet
```

A file called `RakNet` should be created. Go to "Creating the C# project" in the [SWIG Tutorial](/csharp-swig/swig-tutorial).
