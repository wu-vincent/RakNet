---
title: "SWIG Tool-Based Tutorial"
description: Use SWIG to generate C# bindings for RakNet on Windows and Linux.
---

## What is SWIG?

SWIG is an application that generates wrapper code for a native DLL to interface with other languages, allowing you to use a C/C++ library in one of the supported languages. Currently SWIG configuration for RakNet is set up to generate a managed interface that can be used in managed C# in Windows, as well as in Linux with Mono.

SWIG generates a CXX and .h file, which exposes interfaces that can be used by the target language. The CXX file is included when building the C++ DLL that the target language uses.

SWIG also generates files in the target language for inclusion in the project of the target language to interface with the DLL. These are added to the project of the target language.

## What is Mono?

Mono is a cross-platform implementation of the .NET framework. This allows you to compile C# and other .NET code and run them on platforms that originally are not .NET compatible like Linux.

## Choices to Make

You may choose to use the tools with RakNet or start from scratch.

On Windows, batch tools are provided to make the process easier. These tools are located under the Swig directory under DependentExtensions. For Linux the tools will use Wget to pull down SWIG and install version 2.0.00 if SWIG is not installed.

You may also download SWIG yourself and compile them by specifying the options manually. In the manual portion the options used will be explained.

## Step Summary

### Manually

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Generate the SWIG files

See "Generating the SWIG Files Manually" below.

</Step>

<Step>

### Create the DLL

See "Creating the SWIG Wrapped DLL Project" below.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

### Using Tools (Windows with DLL\_Swig solution)

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Rebuild the solution

If you do not plan on using `SQLiteClientLoggerPlugin`, `DependentExtensions\Swig\DLL_Swig\RakNet.sln` already contains a DLL project that makes the SWIG files, builds the DLL, and copies it to the C# sample. Perform a rebuild on this.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

### Using Tools (Windows without DLL\_Swig project)

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Generate the SWIG files

See "Generating the SWIG Files Using Included Tools" below.

</Step>

<Step>

### Create the DLL

See "Creating the SWIG Wrapped DLL Project" below.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

### Using Tools (Linux)

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Generate the SWIG files

See "Generating the SWIG Files Using Included Tools" below.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

## Downloading SWIG

### Windows

<Steps>

<Step>

### Go to the SWIG website

Go to [http://www.swig.org/](http://www.swig.org/)

</Step>

<Step>

### Navigate to downloads

On the left hand side click Download.

</Step>

<Step>

### Access the download area

Either fill out the survey or click the Download area link.

</Step>

<Step>

### Download the Windows package

It will say Windows users should download `<link>` -- click on it.

</Step>

<Step>

### Unzip

Unzip to `C:\Swig` or where you prefer. `C:\Swig` will be used for this tutorial.

</Step>

<Step>

### Add to PATH (optional)

If you wish to use the `DLL_Swig` project you will need to add SWIG to the PATH variable as shown below.

</Step>

</Steps>

#### Adding SWIG to the PATH Variable

<Steps>

<Step>

### Open System Properties

Right click My Computer and click Properties.

</Step>

<Step>

### Open Advanced tab

Click on the Advanced tab.

</Step>

<Step>

### Open Environment Variables

Under Advanced, there is an Environment Variables button -- click it.

</Step>

<Step>

### Select the Path variable

Click on the Path variable.

</Step>

<Step>

### Edit the Path

Click the Edit button.

</Step>

<Step>

### Add the SWIG path

Add the path `C:\Swig` or wherever you unzipped SWIG to.

</Step>

</Steps>

[![](/images/PathVariableShot.jpg)](/images/PathVariableShot.jpg)

**The path variable screen**

### Linux

<Callout type="info">
You may be able to install SWIG using your favorite package manager. If you can, go that route. The instructions vary depending on your package manager and distribution. The batch file will attempt to install 1.6, but it is recommended to use the package manager if you are able to.
</Callout>

<Steps>

<Step>

### Go to the SWIG website

Go to [http://www.swig.org/](http://www.swig.org/)

</Step>

<Step>

### Navigate to downloads

On the left hand side click Download.

</Step>

<Step>

### Access the download area

Either fill out the survey or click the Download area link.

</Step>

<Step>

### Download the latest release

It will say the latest development release is `<link>` -- click on it.

</Step>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Change to the download directory

Change to the directory you downloaded SWIG into.

</Step>

<Step>

### Extract the archive

```bash
tar xzf swig-VERSIONNUMBER.tar.gz
```

</Step>

<Step>

### Enter the directory

```bash
cd VERSIONNUMBER
```

</Step>

<Step>

### Configure

```bash
./configure
```

</Step>

<Step>

### Build

```bash
make
```

</Step>

<Step>

### Install

Switch to your root user, or if user is a sudo user skip to the next command. If root, type `make install` and hit enter; otherwise type `sudo make install` and hit enter.

</Step>

</Steps>

## Generating the SWIG Files Using Included Tools

### Windows

<Callout type="info">
This step on Windows can be skipped if you are using the included `DLL_Swig` project as it runs the tools on rebuild.
</Callout>

<Steps>

<Step>

### Open a command prompt

Click the start menu and click on run. In Vista click start, search, type "run", and hit enter. Type `cmd` and hit enter.

</Step>

<Step>

### Navigate to the SWIG directory

In the next command `PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `C:\RakNet\DependentExtensions\Swig`.

```batch
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the MakeSwig batch file

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory (e.g. `C:\RakNet\Source`). `PATH_TO_SWIG` is an unquoted path with a trailing slash to the SWIG directory (e.g. `C:\Swig\`). If you added SWIG to your PATH variable then `PATH_TO_SWIG` is not needed and can be ignored.

```batch
MakeSwig.bat PATH_TO_RAKNETSOURCE PATH_TO_SWIG
```

For example: `MakeSwig.bat c:\RakNet\Source c:\swigwin-2.0.9`

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you want to use `SQLiteClientLoggerPlugin`, skip the step above and use the next command instead.
- If you have added SWIG to your PATH variable, just use `""` for `PATH_TO_SWIG`.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `C:\RakNet\DependentExtensions\SQLite3Plugin`.

```batch
MakeSwig.bat PATH_TO_RAKNETSOURCE PATH_TO_SWIG PATH_TO_SQLITEPLUGIN
```

Then go to "Creating the SWIG Wrapped DLL Project".

### Linux

<Callout type="info">
The Linux batch requires Wget, Tar, Make and GCC to be installed, unless SWIG is already installed. Most of the time these are already installed.
</Callout>

<Steps>

<Step>

### Open a terminal

Open a terminal if you are not already at one.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `/home/usr/RakNet/DependentExtensions/Swig`.

```bash
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Set permissions

```bash
chmod u+x MakeSwig.sh
```

</Step>

<Step>

### Run the MakeSwig script

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example `/home/usr/RakNet/Source`.

```bash
./MakeSwig.sh PATH_TO_RAKNETSOURCE
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you want to use `SQLiteClientLoggerPlugin`, skip the step above and use the next command instead.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
MakeSwig.sh PATH_TO_RAKNETSOURCE PATH_TO_SQLITEPLUGIN
```

Then skip to "Creating the C# project".

## Generating the SWIG Files Manually

### Windows

<Steps>

<Step>

### Open a command prompt

Click the start menu and click on run. In Vista click start, search, type "run", and hit enter. Type `cmd` and hit enter.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `C:\RakNet\DependentExtensions\Swig`.

```batch
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the SWIG command

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example `C:\RakNet\Source`.

```batch
C:\Swig\swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -outdir SwigOutput\SwigCSharpOutput -o SwigOutput\CplusDLLIncludes\RakNet_wrap.cxx SwigInterfaceFiles\RakNet.i
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you want to use `SQLiteClientLoggerPlugin`, skip the step above.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `C:\RakNet\DependentExtensions\SQLite3Plugin`.

```batch
C:\Swig\swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -I"PATH_TO_SQLITEPLUGIN" -DSWIG_ADDITIONAL_SQL_LITE -outdir SwigOutput\SwigCSharpOutput -o SwigOutput\CplusDLLIncludes\RakNet_wrap.cxx SwigInterfaceFiles\RakNet.i
```

### Linux

<Steps>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example `/home/usr/RakNet/DependentExtensions/Swig`.

```bash
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the SWIG command

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example `/home/usr/RakNet/Source`.

```bash
swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -outdir SwigOutput/SwigCSharpOutput -o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx SwigInterfaceFiles/RakNet.i
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you want to use `SQLiteClientLoggerPlugin`, skip the step above.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -I"PATH_TO_SQLITEPLUGIN" -DSWIG_ADDITIONAL_SQL_LITE -outdir SwigOutput/SwigCSharpOutput -o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx SwigInterfaceFiles/RakNet.i
```

### SWIG Options Explained

| Option | Description |
|--------|-------------|
| `-c++` | Must come first. Indicates the source files are C++ not C. |
| `-csharp` | The target language. Currently the files are made for C# and may not work with other options. |
| `-namespace RakNet` | Puts the generated files in the C# namespace `RakNet`. |
| `-I"PATH_TO_RAKNETSOURCE"` | Includes the directory for source files and includes if different from the interface file location. |
| `-I"SwigInterfaceFiles"` | Includes the directory for the interface files. |
| `-outdir SwigOutput/SwigCSharpOutput` | Where the output files for the target language are placed. |
| `-o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx` | Where the file included in the DLL project is placed. |

The following two are used if `SQLiteClientLoggerPlugin` is used:

| Option | Description |
|--------|-------------|
| `-I"PATH_TO_SQLITEPLUGIN"` | Another include directory -- the base directory where the SQLite plugin is. |
| `-DSWIG_ADDITIONAL_SQL_LITE` | A conditional compilation symbol, defined to include `SQLiteClientLoggerPlugin`. |

## Creating the SWIG Wrapped DLL Project

### Windows

<Callout type="info">
If you do not plan on using `SQLiteClientLoggerPlugin`, `DependentExtensions\Swig\DLL_Swig\RakNet.sln` already contains a DLL project that makes the SWIG files, builds the DLL, and copies it to the C# sample. You do not need to run these steps if you use that project. In that case, run the solution, rebuild the project, and go to "Creating the C# project".
</Callout>

<Steps>

<Step>

### Create a DLL project

Create a DLL project. In MSVC 7 you would create an empty project, then under Application Settings check DLL and empty project.

</Step>

<Step>

### Add source files

Add the source files under the `/Source` directory to the project.

</Step>

<Step>

### Add RakNet.cxx

Add `RakNet.cxx` from `Swigtools/CplusDLLIncludes`.

</Step>

<Step>

### Add include directories

Add to "Additional Include Directories" your directory with the source files.

</Step>

<Step>

### Link Winsock

Import `ws2_32.lib`, or `wsock32.lib` if you don't have Winsock 2 installed. In MSVC 7 you can right click on the project, select Configuration Properties / Linker / Input / Additional Dependencies and type `ws2_32.lib` in there.

</Step>

<Step>

### Set runtime libraries

Set your project to use multi-threaded runtime libraries. In MSVC 7 you can right click on the project, select Configuration Properties / C/C++ / Code Generation / Runtime Library and change it to Multi-threaded (`/MT`).

</Step>

<Step>

### Add preprocessor definition

Add `_RAKNET_DLL` to the Preprocessor Definitions. In VS: Project Properties -> Configuration Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions.

</Step>

<Step>

### Set character set

Set the character set to "not set". In VS: Project Properties -> Configuration Properties -> General -> Character Set.

</Step>

<Step>

### Optionally set preprocessor directives

Optionally set your [preprocessor directives](/basics/preprocessor-directives).

</Step>

<Step>

### Build

Hit F7 or the equivalent to build your DLL and Lib.

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- Add to the project these files under DependentExtensions: `SQLite3Plugin\SQLite3ClientPlugin.h`, `SQLite3Plugin\SQLite3PluginCommon.h`, `SQLite3Plugin\Logger\ClientOnly\SQLiteClientLoggerPlugin.h`, `SQLite3Plugin\Logger\SQLiteLoggerCommon.h`, `SQLite3Plugin\SQLite3ClientPlugin.cpp`, `SQLite3Plugin\SQLite3PluginCommon.cpp`, `SQLite3Plugin\Logger\ClientOnly\SQLiteClientLoggerPlugin.cpp`, `SQLite3Plugin\Logger\SQLiteLoggerCommon.cpp`
- Add to "Additional Include Directories" the path to these folders in the DependentExtensions directory: `SQLite3Plugin\Logger\ClientOnly`, `SQLite3Plugin\Logger`, `SQLite3Plugin`

[![](/images/makedllsmall.jpg)](/images/makedll.jpg)

**Creating an empty DLL project in .NET 2003**

[![](/images/multithreadeddebugsmall.jpg)](/images/multithreadeddebug.jpg)

**Setting Multithreaded debug in .NET 2003**

[![](/images/ws2_32includesmall.jpg)](/images/ws2_32include.jpg)

**Including ws2\_32.lib in .NET 2003**

### Linux

<Callout type="info">
If you ran the Linux batch tool it will have made the dynamic link and attempted to install it, so you may skip these steps if it ran successfully.
</Callout>

<Steps>

<Step>

### Build the shared library

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory (e.g. `../DependentExtensions/Swig`).

```bash
g++ *.cpp PATH_TO_RAKNET_SWIG_FILES/SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx -l pthread -I./ -shared -o RakNet
```

Note: `-l pthread` is lowercase L while `-I./` is uppercase i.

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- If you wish to use `SQLiteClientLoggerPlugin`, use the following command instead:
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g. `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
g++ *.cpp PATH_TO_RAKNET_SWIG_FILES/SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx PATH_TO_SQLITEPLUGIN/SQLite3ClientPlugin.cpp PATH_TO_SQLITEPLUGIN/SQLite3PluginCommon.cpp PATH_TO_SQLITEPLUGIN/Logger/ClientOnly/SQLiteClientLoggerPlugin.cpp PATH_TO_SQLITEPLUGIN/Logger/SQLiteLoggerCommon.cpp -l pthread -I./ -IPATH_TO_SQLITEPLUGIN/Logger/ClientOnly -IPATH_TO_SQLITEPLUGIN/Logger -IPATH_TO_SQLITEPLUGIN -shared -o RakNet
```

A file called `RakNet` should be created that will be copied in the next section.

## Creating the C# Project

### Windows

<Steps>

<Step>

### Create a new C# project

Create a new C# project. In the included sample a console project is used.

</Step>

<Step>

### Optionally create a Swig folder

If you wish to keep the project cleaner, create a new folder called Swig. Right click the project and go to Add -> New Folder.

</Step>

<Step>

### Add generated source files

Add the source files that were generated under the `SwigOutput\SwigCSharpOutput` directory to the project. Right click the project (or the folder if you added one).

</Step>

<Step>

### Add existing items

Go to Add -> Existing Item. Browse to the `SwigOutput\SwigCSharpOutput` directory. If you want to link to the files rather than create a copy, click on the arrow next to Add and add a link. Otherwise click Add.

</Step>

<Step>

### Copy the DLL

Copy the DLL created in the previous step to the same folder as the binary (e.g. `bin\Debug`).

</Step>

<Step>

### Configure for 64-bit compatibility (optional)

If you wish the project to be compatible with 64-bit Vista, follow the remaining sub-steps below.

</Step>

<Step>

### Open Build menu

When the project is open there should be a menu item called Build. Click it.

</Step>

<Step>

### Open Configuration Manager

Go to Configuration Manager and click it.

</Step>

<Step>

### Set platform to x86

On the top right there is a drop-down menu called Active Solution Platform. If x86 is in the project menu click it. If not, click New, pick x86, set Copy Settings to "Any CPU", make sure "Create new project platforms" is checked, and click OK.

</Step>

<Step>

### Verify all configurations

Click on "Active Solutions Configuration" in the top left. Cycle through all items and ensure the Platform column says x86 for each.

</Step>

<Step>

### Add the RakNet namespace

Make sure you have `using RakNet;` at the top of the files using RakNet. If this tutorial was followed the generated files are in the RakNet namespace.

</Step>

</Steps>

<Callout type="warn">
Make sure you have `using RakNet;` at the top of the files using RakNet. If this tutorial was followed the generated files are in the RakNet namespace.
</Callout>

[![](/images/CSharpBuildConfiguration.jpg)](/images/CSharpBuildConfiguration.jpg)

**Example of configuration steps to run on 64-bit systems.**

### C# Sample (Windows)

A C# sample project is included under `DependentExtensions\Swig\SwigWindowsCSharpSample`. The DLL file is not included and needs to be copied to `bin/Debug` or `bin/Release` depending on whether you are doing a release or debug build. If the `DLL_Swig` project is used, the DLL is copied automatically.

### Linux

#### Installing Mono

<Callout type="info">
Mono greater than version 2.0 is needed for full compatibility. Earlier versions work with most of RakNet but cause crashes in some of it. You may be able to install Mono using your favorite package manager; if you can, go that route. This tutorial assumes **gmcs** is installed.
</Callout>

<Steps>

<Step>

### Download Mono

Go to [http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html) and download the Linux version.

</Step>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Extract the archive

Change to the directory you downloaded Mono to.

```bash
tar xzvf mono-VERSION.tar.gz
cd mono-VERSION
```

</Step>

<Step>

### Configure

```bash
./configure --prefix=/usr/local
```

</Step>

<Step>

### Build

```bash
make
```

</Step>

<Step>

### Install

Switch to your root user, or if user is a sudo user skip to the next command. If root, type `make install`; otherwise type `sudo make install`.

</Step>

</Steps>

#### C# Project Setup (Linux)

<Callout type="info">
If you used the included tools and just want to run the sample you may skip this section.
</Callout>

<Steps>

<Step>

### Copy the dynamic link library

Copy the dynamic link library to `/usr/lib` and rename it to `RakNet` with no extension if it is not already.

</Step>

<Step>

### Copy generated files

Copy the files in `Swigtools/SwigCSharpOutput` into your project directory.

</Step>

<Step>

### Create your main C# file

Create your main C# `.cs` file in that folder.

</Step>

<Step>

### Add the RakNet namespace

Make sure you have `using RakNet;` at the top of the files using RakNet.

</Step>

</Steps>

#### Building the Project (Linux)

<Steps>

<Step>

### Compile

```bash
gmcs *.cs -out:ExecutableName.exe
```
where `ExecutableName` is the name you want.

</Step>

<Step>

### Run

```bash
mono ExecutableName.exe
```

</Step>

</Steps>

### C# Sample (Linux)

A C# sample is included under `DependentExtensions/Swig/SwigLinuxCSharpSample`. The DLL file is not included and needs to be copied to `/usr/lib` as per the earlier instructions. If the tools are used, the cs files are automatically copied to the sample directory and there is an attempt by tools to copy the DLL to `/usr/lib`.

## Limitations

1. `BitStream` may have problems if larger than 9 megabytes.

## Important Information

<Callout type="warn">
`RakPeer`, `RakString`, `FullyConnectedMesh2`, `UDPForwarder`, and `UDPProxyCoordinator` need to be released before the program ends. Any item that goes out of scope before program end just needs to be garbage collected, so items not in main or global generally do not have issues. For these, just call the GC before program end. For globals and items in main, the items can be released with the `Dispose` method if `new` was used, or `DestroyInstance` if `CreateInstance` was used.
</Callout>
