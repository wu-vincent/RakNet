---
title: "Custom Memory Management"
description: "How to override RakNet's default malloc, realloc, and free functions with your own custom memory allocators."
---

### Override new, delete, malloc, free, and realloc

Users wishing to provide custom memory management functions can do so via `RakMemoryOverride.cpp`.

There are 3 global pointers defined in this file, with predefined defaults:

```cpp
void *(*rakMalloc)(size_t size) = RakMalloc;
void *(*rakRealloc)(void *p, size_t size) = RakRealloc;
void (*rakFree)(void *p) = RakFree;
```

To override, simply set the values of these variables to something else.

<Callout type="info">
Make sure to set the custom allocator function pointers **before** any RakNet calls are made, typically at the very beginning of `main()`.
</Callout>

For example, to override malloc, you may write:

```cpp
#include "RakMemoryOverride.h"
```

```cpp
void *MyMalloc(size_t size) {
    return malloc(size);
}
```

```cpp
int main() {
    rakMalloc = MyMalloc;
    // ...
}
```

Then edit the file `RakNetDefinesOverrides.h` and add

```cpp
#define _USE_RAK_MEMORY_OVERRIDE 1
```

Alternatively, edit `RakNetDefines.h` `_USE_RAK_MEMORY_OVERRIDE`
