---
title: "Crash Reporter"
description: Catch crashes, write minidumps, and send email reports automatically on Windows.
---

## Minidumps Made Easy

`CrashReporter`, found at `RakNet/Samples/CrashReporter`, is a Windows-only class that simplifies debugging unmonitored servers and game clients. When a crash occurs, `CrashReporter` catches the exception, writes a minidump, and either writes to disk or sends an email. The email operation can be interactive (opening the user's email client) or non-interactive (connecting to the mail server with the [EmailSender](/utilities/email-sender) class and sending a report automatically).

<Callout type="info">
The minidump can be opened in Visual Studio and will show you where the crash occurred and give you the local variable values.
</Callout>

## Using the Minidump

Place the minidump on your hard drive and double-click it. Visual Studio opens and looks for the exe that caused the crash in the directory the crashed program was running from. If it cannot find this exe, or if the exe differs, it searches the current directory. If it still cannot find a match, Visual Studio loads but indicates it cannot find the executable module, and no source code appears. You can specify `modpath=<pathToExeDirectory>` in the project properties window for "Command Arguments". The most reliable approach is to copy the `.dmp` to a directory containing a copy of the exe that crashed.

On load, Visual Studio looks for the `.pdb`, which it uses to locate source code files and other information. This works correctly as long as the source code files on your hard drive match those used to create the exe. If they do not match, the debugger displays the wrong source code. There are three ways to handle this:

**Method 1:** Change the path to your source code so the debugger does not find the wrong code automatically. The debugger fails to locate the source code pointed to in the `.pdb` and prompts you for the correct source code location.

**Method 2:** Build the exe on a different path than your development path. For example, use `c:/Working/Mygame` for development and `c:/Version2.2/Mygame` for release builds. After a build, keep the source files, the exe, and the pdb at that location. When you receive a crash `.dmp`, copy it to the same directory as the exe (e.g., `c:/Version2.2/Mygame/bin`). This way the `.pdb` points to the correct sources from the start.

**Method 3:** Save build labels or branches in source control and get that version (you only need source code + `.exe` + `.pdb`) before debugging. After debugging, restore your previous work.

## Usage

```cpp
#include "DbgHelp.h"
// Link with Dbghelp.lib ws2_32.lib
```
