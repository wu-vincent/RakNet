---
title: "SWIG Tool-Based Tutorial"
description: Use SWIG to generate C# bindings for RakNet on Windows and Linux.
---

## SWIG

SWIG generates wrapper code for a native DLL, enabling a C/C++ library to be used from other languages. The RakNet SWIG configuration produces a managed interface usable from C# on Windows, and from Mono on Linux.

SWIG generates a CXX and .h file that expose interfaces consumed by the target language. The CXX file is included when building the C++ DLL that the target language loads.

SWIG also generates target-language source files for inclusion in the target-language project to interface with the DLL.

## Mono

Mono is a cross-platform implementation of the .NET framework. It allows you to compile C# and other .NET code and run it on platforms that are not natively .NET-compatible, such as Linux.

## Choices to Make

You may choose to use the tools with RakNet or start from scratch.

On Windows, batch tools are provided to simplify the process. These tools are located under the Swig directory in DependentExtensions. On Linux, the tools use Wget to download and install SWIG version 2.0.00 if SWIG is not already installed.

You can also download SWIG yourself and compile by specifying the options manually. The manual portion below explains the options used.

## Step Summary

### Manually

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Generate the SWIG files

See "Generating the SWIG Files Manually" below.

</Step>

<Step>

### Create the DLL

See "Creating the SWIG Wrapped DLL Project" below.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

### Using Tools (Windows with DLL\_Swig solution)

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Rebuild the solution

If you do not plan on using `SQLiteClientLoggerPlugin`, `DependentExtensions\Swig\DLL_Swig\RakNet.sln` already contains a DLL project that makes the SWIG files, builds the DLL, and copies it to the C# sample. Perform a rebuild on this.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

### Using Tools (Windows without DLL\_Swig project)

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Generate the SWIG files

See "Generating the SWIG Files Using Included Tools" below.

</Step>

<Step>

### Create the DLL

See "Creating the SWIG Wrapped DLL Project" below.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

### Using Tools (Linux)

<Steps>

<Step>

### Download SWIG

See "Downloading SWIG" below.

</Step>

<Step>

### Generate the SWIG files

See "Generating the SWIG Files Using Included Tools" below.

</Step>

<Step>

### Create the C# project

See "Creating the C# project" below.

</Step>

</Steps>

## Downloading SWIG

### Windows

<Steps>

<Step>

### Go to the SWIG website

Go to [http://www.swig.org/](http://www.swig.org/)

</Step>

<Step>

### Navigate to downloads

On the left-hand side, click Download.

</Step>

<Step>

### Access the download area

Either fill out the survey or click the Download area link.

</Step>

<Step>

### Download the Windows package

The page indicates which package Windows users need -- click the download link.

</Step>

<Step>

### Unzip

Unzip to `C:\Swig` or your preferred location. This tutorial uses `C:\Swig`.

</Step>

<Step>

### Add to PATH (optional)

To use the `DLL_Swig` project, add SWIG to the PATH variable as shown below.

</Step>

</Steps>

#### Adding SWIG to the PATH Variable

<Steps>

<Step>

### Open System Properties

Right-click My Computer and click Properties.

</Step>

<Step>

### Open Advanced tab

Click on the Advanced tab.

</Step>

<Step>

### Open Environment Variables

Under Advanced, click the Environment Variables button.

</Step>

<Step>

### Select the Path variable

Click on the Path variable.

</Step>

<Step>

### Edit the Path

Click the Edit button.

</Step>

<Step>

### Add the SWIG path

Add the path `C:\Swig` or wherever you unzipped SWIG to.

</Step>

</Steps>

[![](/images/PathVariableShot.jpg)](/images/PathVariableShot.jpg)

**The path variable screen**

### Linux

<Callout type="info">
You may be able to install SWIG using your package manager. If so, prefer that route. The instructions vary by package manager and distribution. The batch file attempts to install 1.6, but using the package manager is recommended when available.
</Callout>

<Steps>

<Step>

### Go to the SWIG website

Go to [http://www.swig.org/](http://www.swig.org/)

</Step>

<Step>

### Navigate to downloads

On the left-hand side, click Download.

</Step>

<Step>

### Access the download area

Either fill out the survey or click the Download area link.

</Step>

<Step>

### Download the latest release

The page lists the latest development release -- click the download link.

</Step>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Change to the download directory

Change to the directory you downloaded SWIG into.

</Step>

<Step>

### Extract the archive

```bash
tar xzf swig-VERSIONNUMBER.tar.gz
```

</Step>

<Step>

### Enter the directory

```bash
cd VERSIONNUMBER
```

</Step>

<Step>

### Configure

```bash
./configure
```

</Step>

<Step>

### Build

```bash
make
```

</Step>

<Step>

### Install

Switch to root, or skip to the next command if your user has sudo privileges. As root, run `make install`; otherwise run `sudo make install`.

</Step>

</Steps>

## Generating the SWIG Files Using Included Tools

### Windows

<Callout type="info">
This step on Windows can be skipped if you are using the included `DLL_Swig` project as it runs the tools on rebuild.
</Callout>

<Steps>

<Step>

### Open a command prompt

Click the Start menu and click Run. In Vista, click Start, search for "run", and press Enter. Type `cmd` and press Enter.

</Step>

<Step>

### Navigate to the SWIG directory

In the next command, `PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example, `C:\RakNet\DependentExtensions\Swig`.

```batch
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the MakeSwig batch file

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory (e.g., `C:\RakNet\Source`). `PATH_TO_SWIG` is an unquoted path with a trailing slash to the SWIG directory (e.g., `C:\Swig\`). If you added SWIG to your PATH variable, `PATH_TO_SWIG` is not needed and can be omitted.

```batch
MakeSwig.bat PATH_TO_RAKNETSOURCE PATH_TO_SWIG
```

For example: `MakeSwig.bat c:\RakNet\Source c:\swigwin-2.0.9`

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- To use `SQLiteClientLoggerPlugin`, skip the step above and use the following command instead.
- If SWIG is in your PATH variable, use `""` for `PATH_TO_SWIG`.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g., `C:\RakNet\DependentExtensions\SQLite3Plugin`.

```batch
MakeSwig.bat PATH_TO_RAKNETSOURCE PATH_TO_SWIG PATH_TO_SQLITEPLUGIN
```

Then go to "Creating the SWIG Wrapped DLL Project".

### Linux

<Callout type="info">
The Linux batch requires Wget, Tar, Make, and GCC, unless SWIG is already installed. These are typically already present.
</Callout>

<Steps>

<Step>

### Open a terminal

Open a terminal if one is not already open.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example, `/home/usr/RakNet/DependentExtensions/Swig`.

```bash
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Set permissions

```bash
chmod u+x MakeSwig.sh
```

</Step>

<Step>

### Run the MakeSwig script

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example, `/home/usr/RakNet/Source`.

```bash
./MakeSwig.sh PATH_TO_RAKNETSOURCE
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- To use `SQLiteClientLoggerPlugin`, skip the step above and use the following command instead.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g., `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
MakeSwig.sh PATH_TO_RAKNETSOURCE PATH_TO_SQLITEPLUGIN
```

Then skip to "Creating the C# project".

## Generating the SWIG Files Manually

### Windows

<Steps>

<Step>

### Open a command prompt

Click the Start menu and click Run. In Vista, click Start, search for "run", and press Enter. Type `cmd` and press Enter.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example, `C:\RakNet\DependentExtensions\Swig`.

```batch
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the SWIG command

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example, `C:\RakNet\Source`.

```batch
C:\Swig\swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -outdir SwigOutput\SwigCSharpOutput -o SwigOutput\CplusDLLIncludes\RakNet_wrap.cxx SwigInterfaceFiles\RakNet.i
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- To use `SQLiteClientLoggerPlugin`, skip the step above.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g., `C:\RakNet\DependentExtensions\SQLite3Plugin`.

```batch
C:\Swig\swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -I"PATH_TO_SQLITEPLUGIN" -DSWIG_ADDITIONAL_SQL_LITE -outdir SwigOutput\SwigCSharpOutput -o SwigOutput\CplusDLLIncludes\RakNet_wrap.cxx SwigInterfaceFiles\RakNet.i
```

### Linux

<Steps>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Navigate to the SWIG directory

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory. For example, `/home/usr/RakNet/DependentExtensions/Swig`.

```bash
cd PATH_TO_RAKNET_SWIG_FILES
```

</Step>

<Step>

### Run the SWIG command

`PATH_TO_RAKNETSOURCE` is the path to the RakNet source directory. For example, `/home/usr/RakNet/Source`.

```bash
swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -outdir SwigOutput/SwigCSharpOutput -o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx SwigInterfaceFiles/RakNet.i
```

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- To use `SQLiteClientLoggerPlugin`, skip the step above.
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g., `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
swig -c++ -csharp -namespace RakNet -I"PATH_TO_RAKNETSOURCE" -I"SwigInterfaceFiles" -I"PATH_TO_SQLITEPLUGIN" -DSWIG_ADDITIONAL_SQL_LITE -outdir SwigOutput/SwigCSharpOutput -o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx SwigInterfaceFiles/RakNet.i
```

### SWIG Options Explained

| Option | Description |
|--------|-------------|
| `-c++` | Must come first. Indicates the source files are C++ not C. |
| `-csharp` | The target language. Currently the files are made for C# and may not work with other options. |
| `-namespace RakNet` | Puts the generated files in the C# namespace `RakNet`. |
| `-I"PATH_TO_RAKNETSOURCE"` | Includes the directory for source files and includes if different from the interface file location. |
| `-I"SwigInterfaceFiles"` | Includes the directory for the interface files. |
| `-outdir SwigOutput/SwigCSharpOutput` | Where the output files for the target language are placed. |
| `-o SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx` | Where the file included in the DLL project is placed. |

The following two are used if `SQLiteClientLoggerPlugin` is used:

| Option | Description |
|--------|-------------|
| `-I"PATH_TO_SQLITEPLUGIN"` | Another include directory -- the base directory where the SQLite plugin is. |
| `-DSWIG_ADDITIONAL_SQL_LITE` | A conditional compilation symbol, defined to include `SQLiteClientLoggerPlugin`. |

## Creating the SWIG Wrapped DLL Project

### Windows

<Callout type="info">
If you do not need `SQLiteClientLoggerPlugin`, `DependentExtensions\Swig\DLL_Swig\RakNet.sln` already contains a DLL project that generates the SWIG files, builds the DLL, and copies it to the C# sample. Skip these steps if you use that project -- open the solution, rebuild, and proceed to "Creating the C# project".
</Callout>

<Steps>

<Step>

### Create a DLL project

Create a DLL project. In MSVC 7, create an empty project, then under Application Settings check DLL and empty project.

</Step>

<Step>

### Add source files

Add the source files under the `/Source` directory to the project.

</Step>

<Step>

### Add RakNet.cxx

Add `RakNet.cxx` from `Swigtools/CplusDLLIncludes`.

</Step>

<Step>

### Add include directories

Add to "Additional Include Directories" your directory with the source files.

</Step>

<Step>

### Link Winsock

Import `ws2_32.lib`, or `wsock32.lib` if Winsock 2 is not installed. In MSVC 7, right-click the project, select Configuration Properties / Linker / Input / Additional Dependencies, and add `ws2_32.lib`.

</Step>

<Step>

### Set runtime libraries

Set the project to use multi-threaded runtime libraries. In MSVC 7, right-click the project, select Configuration Properties / C/C++ / Code Generation / Runtime Library, and change it to Multi-threaded (`/MT`).

</Step>

<Step>

### Add preprocessor definition

Add `_RAKNET_DLL` to the Preprocessor Definitions. In VS: Project Properties -> Configuration Properties -> C/C++ -> Preprocessor -> Preprocessor Definitions.

</Step>

<Step>

### Set character set

Set the character set to "not set". In VS: Project Properties -> Configuration Properties -> General -> Character Set.

</Step>

<Step>

### Optionally set preprocessor directives

Optionally set your [preprocessor directives](/basics/preprocessor-directives).

</Step>

<Step>

### Build

Press F7 (or equivalent) to build the DLL and Lib.

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- Add to the project these files under DependentExtensions: `SQLite3Plugin\SQLite3ClientPlugin.h`, `SQLite3Plugin\SQLite3PluginCommon.h`, `SQLite3Plugin\Logger\ClientOnly\SQLiteClientLoggerPlugin.h`, `SQLite3Plugin\Logger\SQLiteLoggerCommon.h`, `SQLite3Plugin\SQLite3ClientPlugin.cpp`, `SQLite3Plugin\SQLite3PluginCommon.cpp`, `SQLite3Plugin\Logger\ClientOnly\SQLiteClientLoggerPlugin.cpp`, `SQLite3Plugin\Logger\SQLiteLoggerCommon.cpp`
- Add to "Additional Include Directories" the path to these folders in the DependentExtensions directory: `SQLite3Plugin\Logger\ClientOnly`, `SQLite3Plugin\Logger`, `SQLite3Plugin`

[![](/images/makedllsmall.jpg)](/images/makedll.jpg)

**Creating an empty DLL project in .NET 2003**

[![](/images/multithreadeddebugsmall.jpg)](/images/multithreadeddebug.jpg)

**Setting Multithreaded debug in .NET 2003**

[![](/images/ws2_32includesmall.jpg)](/images/ws2_32include.jpg)

**Including ws2\_32.lib in .NET 2003**

### Linux

<Callout type="info">
If the Linux batch tool ran successfully, it already built the dynamic link and attempted to install it, so you can skip these steps.
</Callout>

<Steps>

<Step>

### Build the shared library

`PATH_TO_RAKNET_SWIG_FILES` is the path to the swig directory (e.g., `../DependentExtensions/Swig`).

```bash
g++ *.cpp PATH_TO_RAKNET_SWIG_FILES/SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx -l pthread -I./ -shared -o RakNet
```

Note: `-l pthread` is lowercase L while `-I./` is uppercase i.

</Step>

</Steps>

**Extra instructions for `SQLiteClientLoggerPlugin`:**

- To use `SQLiteClientLoggerPlugin`, use the following command instead:
- `PATH_TO_SQLITEPLUGIN` is the path to the SQLite plugin directory, e.g., `/home/usr/RakNet/DependentExtensions/SQLite3Plugin`.

```bash
g++ *.cpp PATH_TO_RAKNET_SWIG_FILES/SwigOutput/CplusDLLIncludes/RakNet_wrap.cxx PATH_TO_SQLITEPLUGIN/SQLite3ClientPlugin.cpp PATH_TO_SQLITEPLUGIN/SQLite3PluginCommon.cpp PATH_TO_SQLITEPLUGIN/Logger/ClientOnly/SQLiteClientLoggerPlugin.cpp PATH_TO_SQLITEPLUGIN/Logger/SQLiteLoggerCommon.cpp -l pthread -I./ -IPATH_TO_SQLITEPLUGIN/Logger/ClientOnly -IPATH_TO_SQLITEPLUGIN/Logger -IPATH_TO_SQLITEPLUGIN -shared -o RakNet
```

A file called `RakNet` is created, which is copied in the next section.

## Creating the C# Project

### Windows

<Steps>

<Step>

### Create a new C# project

Create a new C# project. In the included sample a console project is used.

</Step>

<Step>

### Optionally create a Swig folder

To keep the project organized, create a new folder called Swig. Right-click the project and go to Add -> New Folder.

</Step>

<Step>

### Add generated source files

Add the source files generated under the `SwigOutput\SwigCSharpOutput` directory to the project. Right-click the project (or the folder if you created one).

</Step>

<Step>

### Add existing items

Go to Add -> Existing Item. Browse to the `SwigOutput\SwigCSharpOutput` directory. To link to the files rather than copying them, click the arrow next to Add and select "Add as Link". Otherwise, click Add.

</Step>

<Step>

### Copy the DLL

Copy the DLL created in the previous step to the same folder as the binary (e.g., `bin\Debug`).

</Step>

<Step>

### Configure for 64-bit compatibility (optional)

For 64-bit Vista compatibility, follow the remaining sub-steps below.

</Step>

<Step>

### Open Build menu

With the project open, click the Build menu item.

</Step>

<Step>

### Open Configuration Manager

Click Configuration Manager.

</Step>

<Step>

### Set platform to x86

In the top-right drop-down menu "Active Solution Platform", select x86 if available. If not, click New, select x86, set Copy Settings to "Any CPU", check "Create new project platforms", and click OK.

</Step>

<Step>

### Verify all configurations

Click "Active Solutions Configuration" in the top left. Cycle through all items and verify the Platform column reads x86 for each.

</Step>

<Step>

### Add the RakNet namespace

Make sure you have `using RakNet;` at the top of the files using RakNet. If this tutorial was followed the generated files are in the RakNet namespace.

</Step>

</Steps>

<Callout type="warn">
Make sure you have `using RakNet;` at the top of the files using RakNet. If this tutorial was followed the generated files are in the RakNet namespace.
</Callout>

[![](/images/CSharpBuildConfiguration.jpg)](/images/CSharpBuildConfiguration.jpg)

**Example of configuration steps to run on 64-bit systems.**

### C# Sample (Windows)

A C# sample project is included under `DependentExtensions\Swig\SwigWindowsCSharpSample`. The DLL file is not included and needs to be copied to `bin/Debug` or `bin/Release` depending on whether you are doing a release or debug build. If the `DLL_Swig` project is used, the DLL is copied automatically.

### Linux

#### Installing Mono

<Callout type="info">
Mono version 2.0 or later is required for full compatibility. Earlier versions work with most of RakNet but cause crashes in some areas. If your package manager provides Mono, prefer that installation method. This tutorial assumes **gmcs** is installed.
</Callout>

<Steps>

<Step>

### Download Mono

Go to [http://www.go-mono.com/mono-downloads/download.html](http://www.go-mono.com/mono-downloads/download.html) and download the Linux version.

</Step>

<Step>

### Open a terminal

Open a terminal.

</Step>

<Step>

### Extract the archive

Change to the directory you downloaded Mono to.

```bash
tar xzvf mono-VERSION.tar.gz
cd mono-VERSION
```

</Step>

<Step>

### Configure

```bash
./configure --prefix=/usr/local
```

</Step>

<Step>

### Build

```bash
make
```

</Step>

<Step>

### Install

Switch to root, or skip to the next command if your user has sudo privileges. As root, run `make install`; otherwise run `sudo make install`.

</Step>

</Steps>

#### C# Project Setup (Linux)

<Callout type="info">
If you used the included tools and only need to run the sample, skip this section.
</Callout>

<Steps>

<Step>

### Copy the dynamic link library

Copy the dynamic link library to `/usr/lib` and rename it to `RakNet` with no extension if it is not already.

</Step>

<Step>

### Copy generated files

Copy the files in `Swigtools/SwigCSharpOutput` into your project directory.

</Step>

<Step>

### Create your main C# file

Create your main C# `.cs` file in that folder.

</Step>

<Step>

### Add the RakNet namespace

Make sure you have `using RakNet;` at the top of the files using RakNet.

</Step>

</Steps>

#### Building the Project (Linux)

<Steps>

<Step>

### Compile

```bash
gmcs *.cs -out:ExecutableName.exe
```
where `ExecutableName` is the name you want.

</Step>

<Step>

### Run

```bash
mono ExecutableName.exe
```

</Step>

</Steps>

### C# Sample (Linux)

A C# sample is included under `DependentExtensions/Swig/SwigLinuxCSharpSample`. The DLL file is not included and needs to be copied to `/usr/lib` as per the earlier instructions. If the tools are used, the cs files are automatically copied to the sample directory and there is an attempt by tools to copy the DLL to `/usr/lib`.

## Limitations

1. `BitStream` may have problems if larger than 9 megabytes.

## Resource Cleanup

<Callout type="warn">
`RakPeer`, `RakString`, `FullyConnectedMesh2`, `UDPForwarder`, and `UDPProxyCoordinator` must be released before the program ends. Items that go out of scope before program end only need to be garbage collected, so items not in main or global scope generally do not cause issues -- call the GC before program end. For globals and items in main, release them with the `Dispose` method if `new` was used, or `DestroyInstance` if `CreateInstance` was used.
</Callout>
